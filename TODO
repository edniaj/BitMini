Tidy up all the code into proper state machines

Build the AST tokenizers and parsers for the tracker CLI